<!DOCTYPE html>
<html lang="en">

<head>
    <title>Grade Form</title>
    <meta charset="utf-8" />
    <link href="css/gradecss.css" type="text/css" rel="stylesheet">
</head>

<body>
    <div class="container">
        <form action="http://mumstudents.org/params.php">
            <fieldset>
                <legend>Retrieve your grade:</legend>
                <div class="input_line">
                    <div class="input-left"> Name :</div>
                    <div class="input-right">
                        <input type="text" name="name">
                    </div>
                </div>

                <div class="input_line">
                    <div class="input-left">Student ID:</div>
                    <div class="input-right">
                        <input type="text" name="studentId">
                    </div>
                </div>
                <div class="input_line">
                    <div class="input-left">Select Assignment:</div>
                    <div class="input-right">
                        <select name="os" id="">
                        <option value="Assignment1">Assignment 1</option>
                        <option value="Assignment2">Assignment 2</option>
                        <option value="Assignment3">Assignment 3</option>
                        <option value="Assignment4">Assignment 4</option>
                        <option value="Assignment5">Assignment 5</option>
                        <option value="Assignment6">Assignment 6</option>
                    </select>
                    </div>
                </div>
                <div class="input_line">
                    <div class="input-left">Select Entry:</div>
                    <div class="input-right">
                        <label> <input type="radio" name="grade" value=""> Feb 2019 </label>
                        <label> <input type="radio" name="grade" value=""> May 2019 </label>
                        <label> <input type="radio" name="grade" value=""> August 2019 </label>
                    </div>
                </div>

                <div class="input_line">
                    <label> <input type="checkbox" name="grade" value=""> I confirm that I am looking for my Grade</label>

                </div>

                <div class="input_line">
                    <button type="submit" class="input-submit">Get Grade</button>

                </div>
            </fieldset>
        </form>
    </div>
</body>

</html>

public String buildLoanDDAMappingQuery(@Param("compId") String compId,
                                       @Param("userId") String userId) {
    return """
        WITH active_company AS (
            SELECT COMP_ID
            FROM mceserv.MCES_COMPANY CA
            INNER JOIN mceserv.COMPANY_DETAILS CD ON CA.COMP_PK = CD.ACTIVE_COMP_PKREF
            WHERE CA.COMP_ID = #{compId}
            AND CD.STATUS_CODE = 'Active'
        )
        SELECT CA.COMP_ID AS compId, CD.STATUS_CODE AS compStatus, MU.USER_ID AS userId, MUS.USER_STATUS_CODE AS userStatus
        FROM active_company CA
        INNER JOIN mceserv.MCES_USER MU ON MU.USER_ID = #{userId}
        INNER JOIN mceserv.USER_STATUS MUS ON MU.USER_PK = MUS.ACTIVE_USER_PKREF
        INNER JOIN mceserv.COMP_RESOURCE CR ON CA.COMP_ID = CR.COMP_ID
        INNER JOIN mceserv.MCES_RESOURCE MR ON MR.RESOURCE_PK = CR.RESOURCE_PKREF
        INNER JOIN mceserv.RESOURCE_ACCOUNT_LOAN RAL ON RAL.RESOURCE_PKREF = MR.RESOURCE_PK
        WHERE MUS.USER_STATUS_CODE = 'Active'
        AND MR.RESOURCE_TYPE IN ('LOAN','US_DDA')
        AND RAL.LOAN_SYSTEM = 'LOANIQ'
        AND EXISTS (SELECT 1 FROM active_company)
    """;
}

