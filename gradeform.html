<!DOCTYPE html>
<html lang="en">

<head>
    <title>Grade Form</title>
    <meta charset="utf-8" />
    <link href="css/gradecss.css" type="text/css" rel="stylesheet">
</head>

<body>
    <div class="container">
        <form action="http://mumstudents.org/params.php">
            <fieldset>
                <legend>Retrieve your grade:</legend>
                <div class="input_line">
                    <div class="input-left"> Name :</div>
                    <div class="input-right">
                        <input type="text" name="name">
                    </div>
                </div>

                <div class="input_line">
                    <div class="input-left">Student ID:</div>
                    <div class="input-right">
                        <input type="text" name="studentId">
                    </div>
                </div>
                <div class="input_line">
                    <div class="input-left">Select Assignment:</div>
                    <div class="input-right">
                        <select name="os" id="">
                        <option value="Assignment1">Assignment 1</option>
                        <option value="Assignment2">Assignment 2</option>
                        <option value="Assignment3">Assignment 3</option>
                        <option value="Assignment4">Assignment 4</option>
                        <option value="Assignment5">Assignment 5</option>
                        <option value="Assignment6">Assignment 6</option>
                    </select>
                    </div>
                </div>
                <div class="input_line">
                    <div class="input-left">Select Entry:</div>
                    <div class="input-right">
                        <label> <input type="radio" name="grade" value=""> Feb 2019 </label>
                        <label> <input type="radio" name="grade" value=""> May 2019 </label>
                        <label> <input type="radio" name="grade" value=""> August 2019 </label>
                    </div>
                </div>

                <div class="input_line">
                    <label> <input type="checkbox" name="grade" value=""> I confirm that I am looking for my Grade</label>

                </div>

                <div class="input_line">
                    <button type="submit" class="input-submit">Get Grade</button>

                </div>
            </fieldset>
        </form>
    </div>
</body>

</html>

package com.mceserv.repository.provider;

import org.apache.ibatis.annotations.Param;

public class LoanDDAMappingProvider {

    public String buildLoanDDAMappingQuery(@Param("compId") String compId,
                                           @Param("userId") String userId) {

        StringBuilder sql = new StringBuilder();

        sql.append("WITH active_company AS (")
           .append(" SELECT CA.COMP_ID ")
           .append(" FROM mceserv.MCES_COMPANY CA ")
           .append(" INNER JOIN mceserv.COMPANY_DETAILS CD ")
           .append("   ON CA.COMP_PK = CD.ACTIVE_COMP_PKREF ")
           .append(" WHERE CA.COMP_ID = #{compId} ")
           .append("   AND CD.STATUS_CODE = 'Active'")
           .append(") ")
           .append("SELECT CA.COMP_ID AS compId, ")
           .append("       CD.STATUS_CODE AS compStatus, ")
           .append("       MU.USER_ID AS userId, ")
           .append("       MUS.USER_STATUS_CODE AS userStatus ")
           .append("FROM active_company CA ")
           .append("INNER JOIN mceserv.MCES_USER MU ")
           .append("   ON MU.USER_ID = #{userId} ")
           .append("INNER JOIN mceserv.USER_STATUS MUS ")
           .append("   ON MU.USER_PK = MUS.ACTIVE_USER_PKREF ")
           .append("INNER JOIN mceserv.COMP_RESOURCE CR ")
           .append("   ON CA.COMP_ID = CR.COMP_ID ")
           .append("INNER JOIN mceserv.MCES_RESOURCE MR ")
           .append("   ON MR.RESOURCE_PK = CR.RESOURCE_PKREF ")
           .append("INNER JOIN mceserv.RESOURCE_ACCOUNT_LOAN RAL ")
           .append("   ON RAL.RESOURCE_PKREF = MR.RESOURCE_PK ")
           .append("INNER JOIN mceserv.COMPANY_DETAILS CD ")
           .append("   ON CD.ACTIVE_COMP_PKREF = CR.COMP_PKREF ")
           .append("WHERE MUS.USER_STATUS_CODE = 'Active' ")
           .append("  AND MR.RESOURCE_TYPE IN ('LOAN','US_DDA') ")
           .append("  AND RAL.LOAN_SYSTEM = 'LOANIQ' ")
           .append("  AND EXISTS (SELECT 1 FROM active_company)");

        return sql.toString();
    }
}


