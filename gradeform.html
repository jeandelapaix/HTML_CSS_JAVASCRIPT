<!DOCTYPE html>
<html lang="en">

<head>
    <title>Grade Form</title>
    <meta charset="utf-8" />
    <link href="css/gradecss.css" type="text/css" rel="stylesheet">
</head>

<body>
    <div class="container">
        <form action="http://mumstudents.org/params.php">
            <fieldset>
                <legend>Retrieve your grade:</legend>
                <div class="input_line">
                    <div class="input-left"> Name :</div>
                    <div class="input-right">
                        <input type="text" name="name">
                    </div>
                </div>

                <div class="input_line">
                    <div class="input-left">Student ID:</div>
                    <div class="input-right">
                        <input type="text" name="studentId">
                    </div>
                </div>
                <div class="input_line">
                    <div class="input-left">Select Assignment:</div>
                    <div class="input-right">
                        <select name="os" id="">
                        <option value="Assignment1">Assignment 1</option>
                        <option value="Assignment2">Assignment 2</option>
                        <option value="Assignment3">Assignment 3</option>
                        <option value="Assignment4">Assignment 4</option>
                        <option value="Assignment5">Assignment 5</option>
                        <option value="Assignment6">Assignment 6</option>
                    </select>
                    </div>
                </div>
                <div class="input_line">
                    <div class="input-left">Select Entry:</div>
                    <div class="input-right">
                        <label> <input type="radio" name="grade" value=""> Feb 2019 </label>
                        <label> <input type="radio" name="grade" value=""> May 2019 </label>
                        <label> <input type="radio" name="grade" value=""> August 2019 </label>
                    </div>
                </div>

                <div class="input_line">
                    <label> <input type="checkbox" name="grade" value=""> I confirm that I am looking for my Grade</label>

                </div>

                <div class="input_line">
                    <button type="submit" class="input-submit">Get Grade</button>

                </div>
            </fieldset>
        </form>
    </div>
</body>

</html>

private void flattenNode(JsonNode node, List<NameValue> properties) {
    node.fields().forEachRemaining(entry -> {
        String name = entry.getKey();
        JsonNode value = entry.getValue();

        // Case 1: Nested object (recurse)
        if (value.isObject() && !value.isArray()) {
            flattenNode(value, properties);
        }

        // Case 2: "property" array case (special BPM structure)
        else if (name.equals("property") && value.isArray()) {
            for (JsonNode arrayElement : value) {
                if (arrayElement.isObject()) {
                    String propName = arrayElement.has("name") ? arrayElement.get("name").asText() : null;
                    String propValue = arrayElement.has("value") ? arrayElement.get("value").asText() : null;
                    if (propName != null && propValue != null) {
                        NameValue nv = new NameValue();
                        nv.setName(propName);
                        nv.setValue(propValue);
                        properties.add(nv);
                    }
                }
            }
        }

        // Case 3: Simple field (string, number, boolean, etc.)
        else if (!value.isNull() && !value.isContainerNode()) {
            NameValue nv = new NameValue();
            nv.setName(name);
            nv.setValue(value.asText());
            properties.add(nv);
        }

        // Case 4: Array of primitive values (not property)
        else if (value.isArray()) {
            for (JsonNode arrayElement : value) {
                if (!arrayElement.isNull() && !arrayElement.isContainerNode()) {
                    NameValue nv = new NameValue();
                    nv.setName(name);
                    nv.setValue(arrayElement.asText());
                    properties.add(nv);
                } else if (arrayElement.isObject()) {
                    flattenNode(arrayElement, properties);
                }
            }
        }
    });
}
