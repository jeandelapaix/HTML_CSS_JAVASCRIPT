<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="css/movie.css" />
    <title>TMNT</title>
</head>

<body>
    <div class="tmntcontent">
        <div>
            <img class="tmntheader" src="images/hw2/banner.png" alt="header" />
        </div>
        <div class="afterheader">
            <h1>TMNT (2007)</h1>
        </div>
        <div class="insidecontent">
            <div class="headback">
                <div class="rightside">

                    <img class="rightpic" src="images/hw2/overview.png" alt="TMNT Movie" />
                    <div class="rightcontent">
                        <dl>
                            <dt>STARRING</dt>
                            <dd>Patrick Stewart <br /> Mako <br /> Sarah Michelle Gellar <br /> Kevin Smith</dd>

                            <dt>DIRECTOR</dt>
                            <dd>Kevin Munroe</dd>

                            <dt>RATING</dt>
                            <dd>PG</dd>

                            <dt>THEATRICAL RELEASE</dt>
                            <dd>Mar 23, 2007</dd>

                            <dt>MOVIE SYNOPSIS</dt>
                            <dd>After the defeat of their old arch nemesis, The Shredder, the Turtles have grown apart as a family.</dd>

                            <dt>MPAA RATING</dt>
                            <dd>PG, for animated action violence, some scary cartoon images and mild language</dd>

                            <dt>RELEASE COMPANY</dt>
                            <dd>Warner Bros.</dd>

                            <dt>RUNTIME</dt>
                            <dd>90 mins</dd>

                            <dt>GENRE</dt>
                            <dd>Action/Adventure, Comedies, Childrens, Martial Arts, Superheroes, Ninjas, Animated Characters</dd>

                            <dt>BOX OFFICE</dt>
                            <dd>$54,132,596</dd>

                            <dt>LINKS</dt>
                            <dd>
                                <ul>
                                    <li><a href="http://www.ninjaturtles.com/">The Official TMNT Site</a></li>
                                    <li><a href="http://www.rottentomatoes.com/m/teenage_mutant_ninja_turtles/">RT Review</a></li>
                                    <li><a href="http://www.rottentomatoes.com/">RT Home</a></li>
                                    <li><a href="http://mumstudents.org/cs472/">CS472</a></li>
                                </ul>
                            </dd>
                        </dl>
                    </div>
                </div>
                <img class="tmntheaderinner" src="images/hw2/rottenbig.png" alt="TMNT Movie" />
                <span class="mtext">32%</span>
            </div>

            <div class="left-content">
                <div class="left-inner-wrapper">
                    <div class="inner-col">
                        <div class="left-inner-content">
                            <p>
                                <img src="images/hw2/fresh.gif" alt="Fresh" />
                                <q>TMNT is a fun, action-filled adventure that will satisfy longtime fans and generate a legion of new ones.</q>
                            </p>
                        </div>
                        <div class="left-footer">
                            <p>
                                <img class="icon" src="images/hw2/critic.gif" alt="Critic" /> Todd Gilchrist <br /> IGN Movies
                            </p>
                        </div>
                    </div>
                    <div class="inner-col">
                        <div class="left-inner-content">
                            <p>
                                <img src="images/hw2/rotten.gif" alt="Rotten" />
                                <q>Ditching the cheeky, self-aware wink that helped to excuse the concept's inherent corniness, the movie attempts to look polished and 'cool,' but the been-there animation can't compete with the then-cutting-edge puppetry of the 1990 live-action movie.</q>
                            </p>
                        </div>
                        <div class="left-footer">
                            <p>
                                <img class="icon" src="images/hw2/critic.gif" alt="Critic" /> Peter Debruge <br /> Variety
                            </p>
                        </div>

                    </div>

                </div>
                <div class="left-inner-wrapper">
                    <div class="inner-col">
                        <div class="left-inner-content">
                            <p>
                                <img src="images/hw2/rotten.gif" alt="Rotten" />
                                <q>Impersonally animated and arbitrarily plotted, the story appears to have been made up as the filmmakers went along.</q>
                            </p>
                        </div>
                        <div class="left-footer">
                            <p>
                                <img class="icon" src="images/hw2/critic.gif" alt="Critic" /> Ed Gonzalez <br /> Slant Magazine
                            </p>
                        </div>
                    </div>

                    <div class="inner-col">
                        <div class="left-inner-content">
                            <p>
                                <img src="images/hw2/rotten.gif" alt="Rotten" />
                                <q>The rubber suits are gone and they've been redone with fancy computer technology, but that hasn't stopped them from becoming dull.</q>
                            </p>
                        </div>
                        <div class="left-footer">
                            <p>
                                <img class="icon" src="images/hw2/critic.gif" alt="Critic" /> Joshua Tyler <br /> CinemaBlend.com
                            </p>
                        </div>
                    </div>
                </div>
                <div class="left-inner-wrapper">
                    <div class="inner-col">
                        <div class="left-inner-content">
                            <p>
                                <img src="images/hw2/rotten.gif" alt="Rotten" />
                                <q>It stinks!</q>
                            </p>
                        </div>
                        <div class="left-footer">
                            <p>
                                <img src="images/hw2/critic.gif" alt="Critic" /> Jay Sherman (unemployed)
                            </p>
                        </div>
                    </div>

                    <div class="inner-col">
                        <div class="left-inner-content">
                            <p>
                                <img src="images/hw2/rotten.gif" alt="Rotten" />
                                <q>The turtles themselves may look prettier, but are no smarter; torn irreparably from their countercultural roots, our superheroes on the half shell have been firmly co-opted by the industry their creators once sought to spoof.</q>
                            </p>
                        </div>
                        <div class="left-footer">
                            <p>
                                <img class="icon" src="images/hw2/critic.gif" alt="Critic" /> Jeannette Catsoulis <br /> New York Times
                            </p>
                        </div>
                    </div>
                    <!--Right here-->

                </div>

                <div class="left-inner-wrapper">
                    <div class="inner-col">
                        <div class="left-inner-content">
                            <p>
                                <img src="images/hw2/rotten.gif" alt="Rotten" />
                                <q>The script feels like it was computer generated. This mechanical presentation lacks the cheesy charm of the three live action films.</q>
                            </p>
                        </div>
                        <div class="left-footer">
                            <p>
                                <img class="icon" src="images/hw2/critic.gif" alt="Critic" /> Steve Rhodes <br /> Internet Reviews
                            </p>
                        </div>
                    </div>
                    <!-- Here -->
                    <div class="inner-col">
                        <div class="left-inner-content">
                            <p>
                                <img src="images/hw2/fresh.gif" alt="Fresh" />
                                <q>The striking use of image and motion allows each sequence to leave an impression. It's an accomplished restart to this franchise.</q>
                            </p>
                        </div>
                        <div class="left-footer">
                            <p>
                                <img class="icon" src="images/hw2/critic.gif" alt="Critic" /> Mark Palermo <br /> Coast (Halifax, Nova Scotia)
                            </p>
                        </div>
                    </div>
                </div>
                <div class="left-inner-wrapper">
                    <div class="inner-col">
                        <div class="left-inner-content">
                            <p>
                                <img src="images/hw2/rotten.gif" alt="Rotten" />
                                <q>YOUR REVIEW HERE</q>
                            </p>
                        </div>
                        <div class="left-footer">
                            <p>
                                <img class="icon" src="images/hw2/critic.gif" alt="Critic" /> NAME <br /> PUBLICATION
                            </p>
                        </div>
                    </div>
                    <div class="inner-col">
                        <div class="left-inner-content">
                            <p>
                                <img src="images/hw2/rotten.gif" alt="Rotten" />
                                <q>YOUR REVIEW HERE</q>
                            </p>
                        </div>
                        <div class="left-footer">
                            <p>
                                <img class="icon" src="images/hw2/critic.gif" alt="Critic" /> NAME <br /> PUBLICATION
                            </p>
                        </div>
                    </div>
                </div>

            </div>
            <br/>
            <br/>
            <div class="last-footer">
                <p class="bc">(1-10) of 88</p>
            </div>

        </div>

    </div>
    <div class="mlinks">
        <a href="https://validator.w3.org/check/referer">
            <img src="http://mumstudents.org/cs472/2014-09/images/w3c-html.png" alt="html validator" />
        </a>
        <br/>
        <a href="https://jigsaw.w3.org/css-validator/check/referer">
            <img src=http://jigsaw.w3.org/css-validator/images/vcss alt="Valid CSS!" />
        </a>
    </div>

</body>

</html>


class GenericBPMPayloadBuilder {
    private final ObjectMapper mapper = new ObjectMapper();

    private void flattenNode(JsonNode node, List<BPMProperty> properties) {
        node.fields().forEachRemaining(entry -> {
            String name = entry.getKey();
            JsonNode value = entry.getValue();

            if (value.isObject()) {
                flattenNode(value, properties);
            } else if (!value.isNull() && !value.asText().isEmpty()) {
                properties.add(new BPMProperty(name, value.asText()));
            }
        });
    }

    public <T> List<BPMProperty> buildPropertiesFromPojo(T sourcePojo) {
        List<BPMProperty> properties = new ArrayList<>();
        if (sourcePojo == null) {
            return properties;
        }

        JsonNode rootNode = mapper.valueToTree(sourcePojo);

        if (rootNode.isObject()) {
            flattenNode(rootNode, properties);
        }
        
        return properties;
    }

    public <T> BPMRequest buildLaunchRequest(T sourcePojo, String processType) {
        List<BPMProperty> propertyList = buildPropertiesFromPojo(sourcePojo);
        ProcessProperties processProperties = new ProcessProperties(propertyList);

        ProcessDetails details = new ProcessDetails(processProperties, processType);

        return new BPMRequest(details);
    }

    public <T> BPMRequest buildUpdateRequest(T sourcePojo, String processType, List<String> actions) {
        List<BPMProperty> propertyList = buildPropertiesFromPojo(sourcePojo);
        ProcessProperties processProperties = new ProcessProperties(propertyList);

        BPMAction action = new BPMAction(actions);

        ProcessDetails details = new ProcessDetails(processProperties, processType, action);

        return new BPMRequest(details);
    }

    public static void main(String[] args) throws Exception {
        GenericBPMPayloadBuilder builder = new GenericBPMPayloadBuilder();
        ObjectMapper mapper = new ObjectMapper();

        Participant participant = new Participant(
            "FREDDY",
            "FRANKLINLAKES",
            "ERNEST",
            "00176243",
            "555-123-4567"
        );

        SampleInputPOJO inputPojo = new SampleInputPOJO(
            "C3K0I8OLL",
            "Asset Transfer Operations",
            "One IRA Account Funding - Capitalize",
            "CLIENT123",
            "1010722",
            "4567890",
            "ROLLOVER_CREATED",
            participant,
            "External",
            "NT124426",
            "IRA",
            "WEB",
            "FEDEX"
        );

        String processType = "CapitalizeRolloverProcess";

        System.out.println("--- BPM Process LAUNCH Request Payload ---");
        BPMRequest launchRequest = builder.buildLaunchRequest(inputPojo, processType);
        String launchJson = mapper.writerWithDefaultPrettyPrinter().writeValueAsString(launchRequest);
        System.out.println(launchJson);

        System.out.println("\n--- BPM Process UPDATE Request Payload ---");
        SampleInputPOJO updatePojo = new SampleInputPOJO();
        updatePojo.setOrchestrationID("C3K0I8OLL");
        updatePojo.setCapitalizeStatus("AWAITING_FUND");

        List<String> actions = List.of("update");

        BPMRequest updateRequest = builder.buildUpdateRequest(updatePojo, processType, actions);
        String updateJson = mapper.writerWithDefaultPrettyPrinter().writeValueAsString(updateRequest);
        System.out.println(updateJson);
    }
